{"version":3,"sources":["webpack:///./src/RList.component.js"],"names":["RList","containerRef","current","update","itemWidth","itemRef","offsetWidth","itemHeight","offsetHeight","window","addEventListener","event","listScrollTop","pageYOffset","offsetTop","array","chunkSize","concat","apply","map","elem","i","slice","times","fn","Array","x","min","max","partNumber","isInRange","visibleCurrentPart","opacity","position","display","items","partsCount","item","isRenderPart","renderPlaceholder","console","log","a","getBoundingClientRect","width","widthOfPart","height","heightOfPart","background","props","children","bottom","zIndex","right","padding","renderParts","renderFakeList","rList","Math","round","itemsInRow","floor","innerHeight","rowsInPart","visibleCurrentValue","ceil","length","itemsInPart","chunk","type","Component","displayName","propTypes","createRef"],"mappings":"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","file":"0.15e9775596f5319e21aa.hot-update.js","sourcesContent":["import React from 'react';\n// MobX\nimport { computed, observable } from 'mobx';\nimport { observer } from 'mobx-react';\n// Models\nimport rListModel from \"./rList.model\";\n// Components\nimport RListItem from \"./RListItem.component\";\n\n\n@observer\nclass RList extends React.Component {\n\n\n\tstatic displayName = 'RList.component';\n\n\tstatic propTypes = {\n\t};\n\n\n\t@observable containerRef = React.createRef();\n\n\t@observable itemRef = React.createRef();\n\n\n\tcomponentDidMount() {\n\t\tif(!this.containerRef.current) return;\n\n\t\trListModel.update({\n\t\t\titemWidth:  this.itemRef.current.offsetWidth,\n\t\t\titemHeight: this.itemRef.current.offsetHeight\n\t\t});\n\n\t\twindow.addEventListener('scroll', (event)=> {\n\t\t\trListModel.update({\n\t\t\t\tlistScrollTop: window.pageYOffset - this.containerRef.current.offsetTop\n\t\t\t});\n\t\t});\n\n\t\twindow.addEventListener('resize', (event)=> {\n\t\t\trListModel.update({\n\t\t\t\titemWidth:  this.itemRef.current.offsetWidth,\n\t\t\t\titemHeight: this.itemRef.current.offsetHeight\n\t\t\t});\n\t\t});\n\t}\n\n\t@computed get rList() { return rListModel.rList; };\n\n\t@computed get itemsInRow() { return Math.round(this.containerRef.current.offsetWidth / this.rList.itemWidth); };\n\n\t@computed get widthOfPart() { return this.itemsInRow * this.rList.itemWidth; };\n\n\t@computed get rowsInPart() { return Math.floor(window.innerHeight / this.rList.itemHeight); };\n\n\t@computed get itemsInPart() { return this.rowsInPart * this.itemsInRow; };\n\n\t@computed get heightOfPart() { return this.rowsInPart * this.rList.itemHeight; };\n\n\t@computed get visibleCurrentPart() {\n\t\tconst visibleCurrentValue = Math.ceil(this.rList.listScrollTop / this.heightOfPart);\n\t\treturn visibleCurrentValue > 0 ? visibleCurrentValue : 1;\n\t};\n\n\n\tget partsCount() { return Math.ceil(this.items.length / this.itemsInPart) };\n\n\tget gameParts() { return this.chunk(this.items, this.itemsInPart); };\n\n\tget items() { return this.props.children.type ? [this.props.children] : this.props.children; };\n\n\n\tchunk(array, chunkSize) {\n\t\treturn [].concat.apply([], array.map(function (elem, i) {\n\t\t\treturn i % chunkSize ? [] : [array.slice(i, i + chunkSize)];\n\t\t}));\n\t}\n\n\n\ttimes(times = 10, fn=()=>{}) { return Array.apply(null, new Array(times)).map(fn); };\n\n\tisInRange(x, min, max) { return ((x-min)*(x-max) <= 0); };\n\n\n\tisRenderPart(partNumber) {\n\t\t// rendering of previous, current, next parts in relation to currentVisible part\n\t\treturn this.isInRange(this.visibleCurrentPart, partNumber-1, partNumber+2);\n\t}\n\n\n\trenderFakeList() {\n\t\treturn (\n\t\t\t<div className=\"r-list\" style={{ opacity: 0, position: \"absolute\" }}>\n\t\t\t\t<div ref={ this.itemRef }\n\t\t\t\t\t style={{ display: \"inline-block\" }}>\n\t\t\t\t\t{ this.items[0] }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\trenderParts() {\n\t\treturn (\n\t\t\t<div className=\"r-list-parts\">\n\t\t\t\t{ this.times(this.partsCount, (item, partNumber)=> {\n\t\t\t\t\treturn 2;\n\t\t\t\t}) }\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\t\n\trenderPart(partNumber) {\n\t\tif(!this.isRenderPart(partNumber)) return this.renderPlaceholder();\n\n\t\tconsole.log({ a: this.containerRef.current });\n\t\tconsole.log(this.containerRef.current.getBoundingClientRect());\n\n\t\treturn (\n\t\t\t<div className={ `r-list-part-${partNumber}`}>\n\t\t\t\t{/*{ this.gameParts[partNumber].map((item, index)=> <div>{index}</div>) }*/}\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\trenderPlaceholder() {\n\t\treturn (\n\t\t\t<div style={{\n\t\t\t\twidth: this.widthOfPart,\n\t\t\t\theight: this.heightOfPart,\n\t\t\t\tbackground: \"transparent\"\n\t\t\t}} />\n\t\t);\n\t}\n\n\n\trender() {\n\t\tif(!this.props.children) return <div className=\"r-list\">empty</div>;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{ this.containerRef.current ?\n\t\t\t\t\t<div style={{ position: \"fixed\", bottom: 5, zIndex: \"1\", right: 5, background: \"lightgray\", padding: 10 }}>\n\t\t\t\t\t\t{/*<p>itemWidth: { this.rList.itemWidth }</p>*/}\n\t\t\t\t\t\t{/*<p>itemHeight: { this.rList.itemHeight }</p>*/}\n\t\t\t\t\t\t{/*<p>itemsInRow: { this.itemsInRow }</p>*/}\n\t\t\t\t\t\t{/*<p>widthOfPart: { this.widthOfPart }</p>*/}\n\t\t\t\t\t\t{/*<p>rowsInPart: { this.rowsInPart }</p>*/}\n\t\t\t\t\t\t{/*<p>itemsInPart: { this.itemsInPart }</p>*/}\n\t\t\t\t\t\t{/*<p>heightOfPart: { this.heightOfPart }</p>*/}\n\t\t\t\t\t\t{/*<p>partsCount: { this.partsCount }</p>*/}\n\t\t\t\t\t\t{/*<p>visibleCurrentPart: { this.visibleCurrentPart }</p>*/}\n\t\t\t\t\t</div>\n\t\t\t\t: null }\n\n\t\t\t\t<div className=\"r-list\" ref={ this.containerRef }>\n\t\t\t\t\t{ this.containerRef.current ? this.renderParts() : null }\n\t\t\t\t</div>\n\n\t\t\t\t{ this.renderFakeList() }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default RList;\n\n\n// WEBPACK FOOTER //\n// ./src/RList.component.js"],"sourceRoot":""}