{"version":3,"sources":["webpack:///./src/RList.component.js"],"names":["RList","containerRef","current","update","itemWidth","itemRef","offsetWidth","itemHeight","offsetHeight","listScrollTop","window","pageYOffset","container","top","addEventListener","event","array","chunkSize","concat","apply","map","elem","i","slice","times","fn","Array","x","min","max","partNumber","isInRange","visibleCurrentPart","opacity","position","display","items","partsCount","item","renderPart","isRenderPart","console","log","renderPlaceholder","gameParts","index","width","widthOfPart","height","heightOfPart","background","props","children","bottom","zIndex","right","padding","rList","itemsInRow","rowsInPart","itemsInPart","renderParts","renderFakeList","Math","round","floor","innerHeight","visibleCurrentValue","ceil","getBoundingClientRect","length","chunk","type","Component","displayName","propTypes","createRef"],"mappings":"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","file":"0.8abe98815d91b88664fa.hot-update.js","sourcesContent":["import React from 'react';\n// MobX\nimport { computed, observable } from 'mobx';\nimport { observer } from 'mobx-react';\n// Models\nimport rListModel from \"./rList.model\";\n// Components\nimport RListItem from \"./RListItem.component\";\n\n\n@observer\nclass RList extends React.Component {\n\n\n\tstatic displayName = 'RList.component';\n\n\tstatic propTypes = {\n\t};\n\n\n\t@observable containerRef = React.createRef();\n\n\t@observable itemRef = React.createRef();\n\n\n\tcomponentDidMount() {\n\t\tif(!this.containerRef.current) return;\n\n\t\trListModel.update({\n\t\t\titemWidth:  this.itemRef.current.offsetWidth,\n\t\t\titemHeight: this.itemRef.current.offsetHeight,\n\t\t\tlistScrollTop: window.pageYOffset - this.container.top\n\t\t});\n\n\t\twindow.addEventListener('scroll', (event)=> {\n\t\t\trListModel.update({\n\t\t\t\tlistScrollTop: window.pageYOffset - this.container.top\n\t\t\t});\n\t\t});\n\n\t\twindow.addEventListener('resize', (event)=> {\n\t\t\trListModel.update({\n\t\t\t\titemWidth:  this.itemRef.current.offsetWidth,\n\t\t\t\titemHeight: this.itemRef.current.offsetHeight\n\t\t\t});\n\t\t});\n\t}\n\n\t@computed get rList() { return rListModel.rList; };\n\n\t@computed get itemsInRow() { return Math.round(this.containerRef.current.offsetWidth / this.rList.itemWidth); };\n\n\t@computed get widthOfPart() { return this.itemsInRow * this.rList.itemWidth; };\n\n\t@computed get rowsInPart() { return Math.floor(window.innerHeight / this.rList.itemHeight); };\n\n\t@computed get itemsInPart() { return this.rowsInPart * this.itemsInRow; };\n\n\t@computed get heightOfPart() { return this.rowsInPart * this.rList.itemHeight; };\n\n\t@computed get visibleCurrentPart() {\n\t\tconst visibleCurrentValue = Math.ceil(this.rList.listScrollTop / this.heightOfPart);\n\t\treturn visibleCurrentValue > 0 ? visibleCurrentValue : 1;\n\t};\n\n\t@computed get container() { return this.containerRef.current.getBoundingClientRect(); };\n\n\n\tget partsCount() { return Math.ceil(this.items.length / this.itemsInPart) };\n\n\tget gameParts() { return this.chunk(this.items, this.itemsInPart); };\n\n\tget items() { return this.props.children.type ? [this.props.children] : this.props.children; };\n\n\n\tchunk(array, chunkSize) {\n\t\treturn [].concat.apply([], array.map(function (elem, i) {\n\t\t\treturn i % chunkSize ? [] : [array.slice(i, i + chunkSize)];\n\t\t}));\n\t}\n\n\n\ttimes(times = 10, fn=()=>{}) { return Array.apply(null, new Array(times)).map(fn); };\n\n\tisInRange(x, min, max) { return ((x-min)*(x-max) <= 0); };\n\n\n\tisRenderPart(partNumber) {\n\t\t// rendering of previous, current, next parts in relation to currentVisible part\n\t\treturn this.isInRange(this.visibleCurrentPart, partNumber-1, partNumber+2);\n\t}\n\n\n\trenderFakeList() {\n\t\treturn (\n\t\t\t<div className=\"r-list\" style={{ opacity: 0, position: \"absolute\" }}>\n\t\t\t\t<div ref={ this.itemRef }\n\t\t\t\t\t style={{ display: \"inline-block\" }}>\n\t\t\t\t\t{ this.items[0] }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\trenderParts() {\n\t\treturn (\n\t\t\t<div className=\"r-list-parts\">\n\t\t\t\t{ this.times(this.partsCount, (item, partNumber)=> {\n\t\t\t\t\treturn <div key={partNumber}>{ this.renderPart(partNumber) }</div>;\n\t\t\t\t}) }\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\t\n\trenderPart(partNumber) {\n\t\tthis.isRenderPart(partNumber) ?\n\t\t\tthis.visibleCurrentPart === partNumber ?\n\t\t\t\tconsole.log(`%c renderGamePart №, ${partNumber}`, \"background: lightblue\")\n\t\t\t\t:\n\t\t\t\tconsole.log(`%c renderGamePart №, ${partNumber}`, \"background: yellow\")\n\t\t\t:\n\t\t\tconsole.log(`%c renderGamePart №, ${partNumber}`, \"background: grey\");\n\n\n\t\tif(!this.isRenderPart(partNumber)) return this.renderPlaceholder();\n\n\n\t\treturn (\n\t\t\t<div className={ `r-list-part-${partNumber}`}>\n\t\t\t\t{ this.gameParts[partNumber].map((item, index)=> <RListItem key={index}>{ item }</RListItem>) }\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\trenderPlaceholder() {\n\t\treturn (\n\t\t\t<div style={{\n\t\t\t\twidth: this.widthOfPart,\n\t\t\t\theight: this.heightOfPart,\n\t\t\t\tbackground: \"transparent\"\n\t\t\t}} />\n\t\t);\n\t}\n\n\n\trender() {\n\t\tif(!this.props.children) return <div className=\"r-list\">empty</div>;\n\n\t\tconsole.log(\"&nbsp;\");\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{ this.containerRef.current ?\n\t\t\t\t\t<div style={{ position: \"fixed\", bottom: 5, zIndex: \"1\", right: 5, background: \"lightgray\", padding: 10 }}>\n\t\t\t\t\t\t<p>listScrollTop: { this.rList.listScrollTop }</p>\n\t\t\t\t\t\t<p>itemWidth: { this.rList.itemWidth }</p>\n\t\t\t\t\t\t<p>itemHeight: { this.rList.itemHeight }</p>\n\t\t\t\t\t\t<p>itemsInRow: { this.itemsInRow }</p>\n\t\t\t\t\t\t<p>widthOfPart: { this.widthOfPart }</p>\n\t\t\t\t\t\t<p>heightOfPart: { this.heightOfPart }</p>\n\t\t\t\t\t\t<p>rowsInPart: { this.rowsInPart }</p>\n\t\t\t\t\t\t<p>itemsInPart: { this.itemsInPart }</p>\n\t\t\t\t\t\t<p>partsCount: { this.partsCount }</p>\n\t\t\t\t\t\t<p>visibleCurrentPart: { this.visibleCurrentPart }</p>\n\t\t\t\t\t</div>\n\t\t\t\t: null }\n\n\t\t\t\t<div className=\"r-list\" ref={ this.containerRef }>\n\t\t\t\t\t{ this.containerRef.current ? this.renderParts() : null }\n\t\t\t\t</div>\n\n\t\t\t\t{ this.renderFakeList() }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default RList;\n\n\n// WEBPACK FOOTER //\n// ./src/RList.component.js"],"sourceRoot":""}